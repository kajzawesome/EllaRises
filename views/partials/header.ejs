<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title || "Ella Rises" %></title>

    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="/js/lang.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".navbar .dropdown > a").forEach(toggle => {
                toggle.addEventListener("click", (e) => {
                    e.preventDefault();
                    const dropdown = toggle.parentElement;
                    dropdown.classList.toggle("open");
                });
            });

            // Close dropdowns when clicking outside
            document.addEventListener("click", (e) => {
                document.querySelectorAll(".navbar .dropdown").forEach(drop => {
                    if (!drop.contains(e.target)) {
                        drop.classList.remove("open");
                    }
                });
            });
        });
    </script>
    <script>
        const customInput = document.getElementById('customAmount');
        const customRadio = document.querySelector('input[value="custom"]');

        customInput.addEventListener('focus', () => {
            customRadio.checked = true;
        });
    </script>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar">
        <a href="/">
            <img class="nav-logo" src="/images/circleellarises.png" alt="Ella Rises Logo">
        </a>

        <div class="nav-links">
            <!-- ABOUT -->
            <!-- About with dropdown -->
            <div class="dropdown">
                <a href="#">
                    <span class="lang-en">About</span>
                    <span class="lang-es">Sobre</span>
                </a>
                <div class="dropdown-content">
                    <a href="/mission">
                        <span class="lang-en">Our Mission</span>
                        <span class="lang-es">Nuestra Misión</span>
                    </a>

                    <a href="/team">
                        <span class="lang-en">Our Team</span>
                        <span class="lang-es">Nuestro Equipo</span>
                    </a>

                    <a href="/board">
                        <span class="lang-en">Board of Directors</span>
                        <span class="lang-es">Junta Directiva</span>
                    </a>
                </div>
            </div>
            
            <!-- EVENTS -->
            <a href="/events/register" class="lang-en">Programs & Events</a>
            <a href="/events/register" class="lang-es">Programas y Eventos</a>

            <!-- GET INVOLVED -->
            <a href="/pages/getinvolved" class="lang-en">Get Involved</a>
            <a href="/pages/getinvolved" class="lang-es">Involúcrate</a>

            <!-- PRESS -->
            <a href="/press" class="lang-en">Press</a>
            <a href="/press" class="lang-es">Noticias</a>

            <!-- CONTACT -->
            <a href="/contact" class="lang-en">Contact Us</a>
            <a href="/contact" class="lang-es">Contáctanos</a>

            <% if (!user) { %>

                <!-- Show Login/Register if NOT logged in -->
                <form action="/login" method="GET" class="nav-button">
                    <button type="submit" class="nav-button lang-en">Login/Register</button>
                    <button type="submit" class="nav-button lang-es">Iniciar/Registrar</button>
                </form>

            <% } else { %>
                <!-- Show User Icon when logged in -->
                <div class="user-icon-container dropdown">
                    <a href="/profile">
                        <i class="fa-solid fa-user"></i> <%= user.name %>
                    </a>
                    <% if (user.level === "M") { %>
                        <div class="dropdown-content">
                        <a href="/admin/dashboard">
                            <span class="lang-en">Dashboard</span>
                            <span class="lang-es">El Tablero de Control</span>
                        </a>
                        <a href="/logout">
                            <span class="lang-en">Logout</span>
                            <span class="lang-es">Desconectar</span>
                        </a>
                        </div>
                    <% } %>
                    <% if (user.level === "U") { %>
                        <div class="dropdown-content">
                            <a href="/account/<%= user.userid %>">
                                <span class="lang-en">Account</span>
                                <span class="lang-es">Cuenta</span>
                            </a>
                            <a href="/logout">
                                <span class="lang-en">Logout</span>
                                <span class="lang-es">Desconectar</span>
                            </a>
                        </div>
                    <% } %>
                </div>

            <% } %>

            <!-- DONATE -->
            <a class="nav-donate lang-en" href="/pages/donations">Donate</a>
            <a class="nav-donate lang-es" href="/pages/donations">Donar</a>
        </div>

        <!-- LANGUAGE TOGGLE -->
        <div class="lang-toggle">
            <button onclick="setLang('en')">English</button>
            <button onclick="setLang('es')">Espanol</button>
        </div>
    </nav>