<%- include('../partials/header', { title: 'Event Survey' }) %>

<div class="admin-container">

  <% if (user && user.level === "M") { %>
  <aside class="admin-sidebar">
      <h3>
        <span class="lang-en">Admin Tools</span>
        <span class="lang-es">Herramientas Admin</span>
      </h3>

      <a class="admin-btn" href="/admin/dashboard">
        <span class="lang-en">Dashboard</span>
        <span class="lang-es">Panel</span>
      </a>

      <a class="admin-btn" href="/admin/add-event">
        <span class="lang-en">Add Event/Program</span>
        <span class="lang-es">Agregar Evento/Programa</span>
      </a>

      <a class="admin-btn" href="/admin/manageevents">
        <span class="lang-en">Manage Events</span>
        <span class="lang-es">Administrar Eventos</span>
      </a>

      <a class="admin-btn" href="/admin/manageusers">
        <span class="lang-en">Manage Users</span>
        <span class="lang-es">Administrar Usuarios</span>
      </a>

      <a class="admin-btn" href="/admin/surveys">
        <span class="lang-en">Manage Surveys</span>
        <span class="lang-es">Administrar Encuestas</span>
      </a>

      <a class="admin-btn" href="/admin/managedonations">
        <span class="lang-en">Manage Donations</span>
        <span class="lang-es">Administrar Donaciones</span>
      </a>
  </aside>
  <% } %>

  <main class="admin-main">

    <h2>
      <span class="lang-en">Event Survey</span>
      <span class="lang-es">Encuesta del Evento</span>
    </h2>

    <!-- EVENT INFO -->
    <div class="event-card" style="margin-bottom:20px;">
      <h3><%= occurrence.eventname %></h3>
      <p>
        <strong>
          <span class="lang-en">Participant:</span>
          <span class="lang-es">Participante:</span>
        </strong>
        <%= participant.participantfirstname %> <%= participant.participantlastname %>
        <br>

        <strong>
          <span class="lang-en">Date:</span>
          <span class="lang-es">Fecha:</span>
        </strong>
        <%= occurrence.eventdatestart ? occurrence.eventdatestart.toISOString().split("T")[0] : "" %>
        &nbsp; @ <%= occurrence.eventtimestart %>
      </p>
    </div>


    <!-- SURVEY FORM -->
    <form
      action="/survey/submit/<%= registrationid %>"
      method="POST"
      class="event-card"
      style="padding:20px;"
    >

      <h3>
        <span class="lang-en">Please Evaluate Your Experience</span>
        <span class="lang-es">Por favor evalúe su experiencia</span>
      </h3>


      <!-- Satisfaction -->
      <label style="margin-top:15px;">
        <span class="lang-en">Overall Satisfaction</span>
        <span class="lang-es">Satisfacción General</span>
      </label>
      <select name="satisfactionscore" required>
        <option value="">
          <span class="lang-en">Select</span>
          <span class="lang-es">Seleccione</span>
        </option>
        <option value="1" <%= survey && survey.satisfactionscore == 1 ? "selected" : "" %>>1</option>
        <option value="2" <%= survey && survey.satisfactionscore == 2 ? "selected" : "" %>>2</option>
        <option value="3" <%= survey && survey.satisfactionscore == 3 ? "selected" : "" %>>3</option>
        <option value="4" <%= survey && survey.satisfactionscore == 4 ? "selected" : "" %>>4</option>
        <option value="5" <%= survey && survey.satisfactionscore == 5 ? "selected" : "" %>>5</option>
      </select>


      <!-- Usefulness -->
      <label style="margin-top:15px;">
        <span class="lang-en">Usefulness of the Event</span>
        <span class="lang-es">Utilidad del Evento</span>
      </label>
      <select name="usefulnessscore" required>
        <option value="">
          <span class="lang-en">Select</span>
          <span class="lang-es">Seleccione</span>
        </option>
        <option value="1" <%= survey && survey.usefulnessscore == 1 ? "selected" : "" %>>1</option>
        <option value="2" <%= survey && survey.usefulnessscore == 2 ? "selected" : "" %>>2</option>
        <option value="3" <%= survey && survey.usefulnessscore == 3 ? "selected" : "" %>>3</option>
        <option value="4" <%= survey && survey.usefulnessscore == 4 ? "selected" : "" %>>4</option>
        <option value="5" <%= survey && survey.usefulnessscore == 5 ? "selected" : "" %>>5</option>
      </select>


      <!-- Instructor Quality -->
      <label style="margin-top:15px;">
        <span class="lang-en">Instructor / Facilitator Quality</span>
        <span class="lang-es">Calidad del Instructor / Facilitador</span>
      </label>
      <select name="instructorscore" required>
        <option value="">
          <span class="lang-en">Select</span>
          <span class="lang-es">Seleccione</span>
        </option>
        <option value="1" <%= survey && survey.instructorscore == 1 ? "selected" : "" %>>1</option>
        <option value="2" <%= survey && survey.instructorscore == 2 ? "selected" : "" %>>2</option>
        <option value="3" <%= survey && survey.instructorscore == 3 ? "selected" : "" %>>3</option>
        <option value="4" <%= survey && survey.instructorscore == 4 ? "selected" : "" %>>4</option>
        <option value="5" <%= survey && survey.instructorscore == 5 ? "selected" : "" %>>5</option>
      </select>


      <!-- Recommendation -->
      <label style="margin-top:15px;">
        <span class="lang-en">Likelihood to Recommend</span>
        <span class="lang-es">Probabilidad de Recomendar</span>
      </label>
      <select name="recommendationscore" required>
        <option value="">
          <span class="lang-en">Select</span>
          <span class="lang-es">Seleccione</span>
        </option>
        <option value="1" <%= survey && survey.recommendationscore == 1 ? "selected" : "" %>>1</option>
        <option value="2" <%= survey && survey.recommendationscore == 2 ? "selected" : "" %>>2</option>
        <option value="3" <%= survey && survey.recommendationscore == 3 ? "selected" : "" %>>3</option>
        <option value="4" <%= survey && survey.recommendationscore == 4 ? "selected" : "" %>>4</option>
        <option value="5" <%= survey && survey.recommendationscore == 5 ? "selected" : "" %>>5</option>
      </select>

      <!-- Comments -->
      <label style="margin-top:15px;">
        <span class="lang-en">Additional Comments</span>
        <span class="lang-es">Comentarios Adicionales</span>
      </label>
      <textarea
        name="comments"
        rows="5"
        placeholder=""
      ><%= survey ? survey.comments : "" %></textarea>


      <button class="admin-btn" type="submit" style="margin-top:20px; width:220px;">
        <span class="lang-en">Submit Survey</span>
        <span class="lang-es">Enviar Encuesta</span>
      </button>

    </form>

  </main>
</div>

<%- include('../partials/footer') %>